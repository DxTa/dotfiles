# Change prefix from Ctrl-B to Ctrl-Q
unbind C-b
set -g prefix C-q
bind C-q send-prefix

# F1-F12: Smart select-or-create windows
# If window N exists, select it; otherwise create it at index N
bind -n F1  if-shell 'tmux list-windows | grep -q "^1:"' 'select-window -t 1'  'new-window -t 1'
bind -n F2  if-shell 'tmux list-windows | grep -q "^2:"' 'select-window -t 2'  'new-window -t 2'
bind -n F3  if-shell 'tmux list-windows | grep -q "^3:"' 'select-window -t 3'  'new-window -t 3'
bind -n F4  if-shell 'tmux list-windows | grep -q "^4:"' 'select-window -t 4'  'new-window -t 4'
bind -n F5  if-shell 'tmux list-windows | grep -q "^5:"' 'select-window -t 5'  'new-window -t 5'
bind -n F6  if-shell 'tmux list-windows | grep -q "^6:"' 'select-window -t 6'  'new-window -t 6'
bind -n F7  if-shell 'tmux list-windows | grep -q "^7:"' 'select-window -t 7'  'new-window -t 7'
bind -n F8  if-shell 'tmux list-windows | grep -q "^8:"' 'select-window -t 8'  'new-window -t 8'
bind -n F9  if-shell 'tmux list-windows | grep -q "^9:"' 'select-window -t 9'  'new-window -t 9'
bind -n F10 if-shell 'tmux list-windows | grep -q "^10:"' 'select-window -t 10' 'new-window -t 10'
bind -n F11 if-shell 'tmux list-windows | grep -q "^11:"' 'select-window -t 11' 'new-window -t 11'
bind -n F12 if-shell 'tmux list-windows | grep -q "^12:"' 'select-window -t 12' 'new-window -t 12'

# Windows start at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Mouse support
set -g mouse on

# Enable OSC 52 clipboard integration
set -g set-clipboard on

# Longer scroll history
set -g history-limit 10000

# Ctrl-Q + k: Kill dev session and unmount sshfs (with confirmation)
bind k confirm-before -p "Kill session '#{session_name}' and unmount? (y/n)" "run-shell 'zsh -ic \"dev-umount #{session_name}\"'"

# Renumber windows when one is closed (DISABLED to keep F-key assignments stable)
set -g renumber-windows off

# Improve colors (use xterm-256color for better key support)
set -g default-terminal "xterm-256color"

# Enable extended keys (for Shift+Enter, Ctrl+Shift+*, etc.)
set -s extended-keys on
set -as terminal-features 'xterm*:extkeys'
set -as terminal-features 'screen*:extkeys'

# Status bar styling
set -g status-style bg=black,fg=white
set -g status-left-length 40
set -g status-right "%d %b %R"

# Window status styling
setw -g window-status-current-style bg=blue,fg=white,bold
setw -g window-status-style bg=black,fg=white

# Vi mode in copy mode (bonus)
setw -g mode-keys vi
